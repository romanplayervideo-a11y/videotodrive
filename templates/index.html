<!DOCTYPE html>
<html>
<head>
  <title>URL to Google Drive</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>

<h2>URL â†’ Google Drive Uploader</h2>

<button onclick="login()">Login with Google</button>

<br><br>

<input id="url" placeholder="Paste video URL" style="width:100%;padding:8px">
<button onclick="upload()">Upload</button>

<script>
let sessionId = "";

function login(){
  fetch("/login")
    .then(r=>r.json())
    .then(d=>window.location.href=d.auth_url);
}

function upload(){
  const form = new FormData();
  form.append("video_url", document.getElementById("url").value);
  form.append("session_id", sessionId);

  fetch("/upload", {method:"POST", body:form})
    .then(r=>r.json())
    .then(d=>alert("Upload started in background"));
}
</script>

</body>
</html>
